title: java_study_jvm
date: 2016-02-19 09:37:42
tags: java jvm
---
```
1. jvm java虚拟机使java这门高级语言实现了跨平台性．jvm将字节码转换成具体平台的机器代码．
2. jvm也是一个进程，也有自己的代码，和自己的生命周期．调用java 命令就是启动该进程
3. jvm处理代码的过程，加载class文件，检验，解释执行．
4. jvm将执行程序所占用的内存划分为方法区，java虚拟机栈，本地方法栈，程序计数器，java堆．
其中方法区和java堆是线程间共享的，其他是线程独享的内存．
  方法区主要是是常量和静态变量，被虚拟机加载的类信息，以及运行时常量池．
  程序计数器，是指该线程执行的刻度，来表示该线程执行的进度．这个计数器记录的是执行的java方法，
正在执行的字节码指令的地址．
  java虚拟机栈是指该线程正在执行的方法所占用的内存，每一个方法对应一个栈帧，当一个方法执行时，
在虚拟机栈创建一个栈帧，当该方法执行完后，该栈帧消失．可能会出现栈溢出异常或者内存溢出异常．
栈帧包括一下内容：局部变量表，操作数栈，动态链接，方法出口等信息．
  java堆可以处于物理不连续的内存空间上，只要逻辑是连续的．
  直接内存,不属于以上内存管理的范畴，是jdk1.4引入的NIO类（new　input/output），他可以使用，
Native函数库直接分配堆外内存，然后通过一个存储在java堆中的DirectByteBuffer对象作为这块，
内存引用进行操作．
5.对象创建的过程
  1>在运行时常量池中，检查是否存在这个类的引用，没有的话要进行类的加载．
  2>分配内存（若内存是连续的可以采用指针碰撞法）
  3>对象的必要设置（header)
  4>对象初始化
  对象主要包括三部分：header instanceData padding（对齐补充）
  其中header组成主要有一下几部分：自身运行时数据和类型指针;
  其中，自身运行时数据有主要有，hash码，GC分代年龄，锁状态标志，线程持有的锁，偏向线程，
  偏向时间戳．
  而类型指针是指向他的类元数据的指针．来判断是那个类的实例．




```
